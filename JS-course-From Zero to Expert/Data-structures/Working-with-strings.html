<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        height: 100vh;
        display: flex;
        align-items: center;
        background: linear-gradient(to top left, #28b487, #7dd56f);
      }
      h1 {
        font-family: sans-serif;
        font-size: 50px;
        line-height: 1.3;
        width: 100%;
        padding: 30px;
        text-align: center;
        color: white;
      }
      button {
        width: 50px;
        height: 20px;
        margin: 10px;
      }
      textarea {
        width: 300px;
        height: 100px;
      }
    </style>
  </head>
  <body>
    <script>
      'use strict';
      const airline = 'TAP Air Portugal';
      const plane = 'A320';

      console.log(plane[0]);
      console.log(plane[1]);
      console.log(plane[2]);

      // å¯ä»¥ç›´æ¥æŠŠå­—ä¸²å¯«å‡ºä¾†ï¼Œç”¨ä¾†å–å€¼
      console.log('BJ4'[1]);

      console.log(airline.length);
      console.log('TAW Air Taiwan'.length);

      // æ‰¾åˆ°è©²å­—ä¸²çš„ä½ç½®ï¼Œæœƒæ‰¾å‡ºç¬¬ä¸€å€‹ç›¸ç¬¦çš„
      console.log(airline.indexOf('r'));
      // æ‰¾åˆ°è©²å­—ä¸²çš„ä½ç½®ï¼Œæœƒæ‰¾å‡ºæœ€å¾Œä¸€å€‹ç›¸ç¬¦çš„
      console.log(airline.lastIndexOf('r'));

      // ä¹Ÿå¯ä»¥ç›´æ¥æ‰¾ä¸€å€‹é•·å­—ä¸²
      console.log(airline.indexOf('Portugal'));

      // ===== slice =====
      // å‡ºä¾†çš„çµæœå« substring() ç”¨ä¾†æ“·å–å…©å€‹ç´¢å¼•ä½ç½®ä¹‹é–“çš„å­—ä¸²ï¼Œç´¢å¼•ä½ç½®å¾0 é–‹å§‹ã€‚
      // substring() é‚„æœ‰ä¸€å€‹ç‰¹åˆ¥çš„åœ°æ–¹åœ¨æ–¼ï¼Œå¦‚æœindexStart æ¯”indexEnd é‚„å¤§æ™‚ï¼Œæ•ˆæœå°±åƒé€™å…©å€‹åƒæ•¸ä½ç½®äº’æ›ä¸€æ¨£ã€‚
      // ä½†å› ç‚º string æ˜¯åŸå§‹å‹åˆ¥ï¼Œæ‰€ä»¥ä¸æœƒä¿®æ”¹åˆ°åŸæœ¬çš„ airline å€¼
      // æ‰€ä»¥å¦‚æœæƒ³è¦å­˜å–çµæœï¼Œå°±éœ€è¦å­˜åˆ°æ–°çš„è®Šæ•¸è£¡
      console.log('========== slice ==========');
      console.log(airline.slice(4));
      console.log(airline.slice(-2));
      console.log(airline.slice(4, 7));

      // å‰ªæ‰æœ€å¾Œä¸€å€‹å­—
      console.log(airline.slice(1, -1));
      console.log(airline);

      console.log(airline.slice(0, airline.indexOf('P') + 1));

      const checkMiddleSeat = function (seat) {
        // B and E are middle seats
        // åˆ¤æ–·å­—ä¸²çš„æœ€å¾Œä¸€å€‹å€¼æ˜¯å¦æ˜¯ B æˆ– E
        const s = seat.slice(-1);
        if (s === 'B' || s === 'E') console.log('You got the middle one!');
        else console.log('Not middle');
      };

      // æ•¸å­—æ˜¯è¡Œæ•¸ï¼Œè‹±æ–‡æ˜¯column
      // æ¯ç•¶æˆ‘å€‘è®“å­—ä¸²å‘¼å« Method æ™‚ï¼Œè©²å­—ä¸²å°±æœƒè‡ªå‹•è¢«è½‰æˆç‰©ä»¶
      // æ¯”å¦‚å‘¼å« .slice( )
      checkMiddleSeat('11B');
      checkMiddleSeat('23C');
      checkMiddleSeat('3E');

      console.log('========== part2 ==========');
      console.log(airline.toLowerCase());
      console.log('Sam'.toUpperCase());

      // Fix capitalization in name
      const passenger = 'jOnAS';
      const passengerLower = passenger.toLowerCase();
      const passengerCorrect =
        passengerLower[0].toUpperCase() + passengerLower.slice(1);
      console.log(passengerCorrect);

      // Comparing email
      const email = 'hello@jonas.io';
      const loginEmail = ' Hello@Jonas.Io \n';

      // 1.å…ˆå…¨éƒ¨è½‰æˆå°å¯«
      const lowerEmail = loginEmail.toLowerCase();

      // 2.åˆªé™¤æ‰ç©ºæ ¼
      const trimmedEmail = lowerEmail.trim();
      console.log(trimmedEmail);

      // æ•´åˆæˆä¸€å€‹æ­¥é©Ÿ
      const normalizedEmail = loginEmail.toLowerCase().trim();
      console.log(normalizedEmail);

      const checkCorrectEmail = function () {
        return email === normalizedEmail ? true : false;
      };
      console.log(checkCorrectEmail());

      // replacing
      // replace æ–¹æ³•ä¹Ÿæœƒç”¢å‡ºä¸€å€‹æ–°çš„å­—ä¸²ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸæœ¬çš„
      // åªæœƒä¿®æ”¹ç¬¬ä¸€å€‹
      const priceTW = '120,000NT';
      const priceUS = priceTW.replace('NT', '$').replace(',', '.');
      console.log(priceUS);

      const announcement =
        'All passengers come to boarding door 23. Boarding door 23.';

      console.log(announcement.replace('door', 'gate'));
      console.log(announcement.replaceAll('door', 'gate'));

      // ä¹Ÿå¯ä»¥ç”¨ æ­£å‰‡è¡¨ç¤ºå¼çš„æ–¹å¼ä¾†åš
      console.log(announcement.replace(/door/g, 'gate'));

      // return Booleans
      // ç”¨ä¾†çœ‹æ˜¯å¦æœ‰åŒ…å«è©²å­—ä¸²
      const planeName = 'Airbus A320neo';
      console.log(planeName.includes('A320'));
      console.log(planeName.includes('Boeing'));
      console.log(planeName.startsWith('A320'));
      console.log(planeName.startsWith('Air'));

      // check whether the current plane is part of the new airbus family
      if (planeName.startsWith('Airbus') && planeName.endsWith('neo')) {
        console.log('part of the new airbus family');
      }

      // Practice exercise
      // ç•¶å†è™•ç† input æ™‚ï¼Œè¦åœ¨ä¸€é–‹å§‹å°±å…ˆæŠŠæ‰€æœ‰çš„ input å…§å®¹è½‰æˆå°å¯«ï¼Œé€™æ¨£æ‰ä¸ç”¨å¤§å°å¯«éƒ½æª¢æŸ¥
      const checkBaggage = function (items) {
        const baggage = items.toLowerCase();
        if (baggage.includes('knife') || baggage.includes('gun')) {
          console.log('You are not allowed on board');
        } else {
          console.log('Welcome!!');
        }
      };

      checkBaggage('I have a laptop, some Food, and a pocket Knife');
      checkBaggage('Socks and camera');
      checkBaggage('Got some snacks and a gun for protection');

      // split ç”¨ä¾†åˆ†å‰²å­—ä¸²ï¼Œä¹Ÿæœƒç”¢ç”Ÿå‡ºæ–°çš„é™£åˆ—
      // console.log('a+very+nice+string'.split('+'));

      const [firstName, lastName] = 'Sam Huang'.split(' ');

      // join ç›¸åçš„ split
      const newName = ['Mr.', firstName, lastName.toUpperCase()].join(' ');
      // console.log(newName);

      const passengerName = 'jessica ann smith davis';
      const nameCap = function (name) {
        const names = name.split(' ');
        const namesUpper = [];

        // return names;
        for (const n of names) {
          // æ–¹æ³•ä¸€
          // namesUpper.push(n[0].toUpperCase() + n.slice(1));

          // æ–¹æ³•äºŒ
          namesUpper.push(n.replace(n[0], n[0].toUpperCase()));
        }

        console.log(namesUpper.join(' '));
      };

      nameCap(passengerName);
      nameCap('sam huang');

      // add a number of characters to the string
      // ç¬¬ä¸€å€‹åƒæ•¸å¡«å­—ä¸²çš„é•·åº¦ï¼Œç¬¬äºŒå€‹å¡«è£œé½Šçš„å­—
      const message = 'Go to gate 23!';
      console.log(message.padStart(25, '9'));
      console.log('Sam'.padStart(10, '78'));

      // padEnd
      console.log(message.padStart(20, 'f').padEnd(25, 'b'));

      const maskCreditCard = function (number) {
        const maskedNumber = number + '';
        console.log(maskedNumber);
        const fourNumber = maskedNumber.slice(-4);
        return fourNumber.padStart(25, '*');
      };

      console.log(maskCreditCard(43367840309855736));
      // console.log(maskCreditCard('4336784463450309854738'));

      // Repeat
      const message2 = 'Bad weather... All Departures Delayed... @@';
      console.log(message2.repeat(3));

      const planesInLine = function (n) {
        console.log(`There are ${n} planes in line ${'âœˆï¸'.repeat(n)}`);
      };

      planesInLine(10);
      planesInLine(2);
      planesInLine(5);

      ///////////////////////////////////////
      // Coding Challenge #4

      /* 
      Write a program that receives a list of variable names written in underscore_case and convert them to camelCase.

      The input will come from a textarea inserted into the DOM (see code below), and conversion will happen when the button is pressed.

      THIS TEST DATA (pasted to textarea)
      underscore_case
      first_name
      Some_Variable 
      calculate_AGE
      delayed_departure

      SHOULD PRODUCE THIS OUTPUT (5 separate console.log outputs)
      underscoreCase      âœ…
      firstName           âœ…âœ…
      someVariable        âœ…âœ…âœ…
      calculateAge        âœ…âœ…âœ…âœ…
      delayedDeparture    âœ…âœ…âœ…âœ…âœ…

      HINT 1: Remember which character defines a new line in the textarea ğŸ˜‰
      HINT 2: The solution only needs to work for a variable made out of 2 words, like a_b
      HINT 3: Start without worrying about the âœ…. Tackle that only after you have the variable name conversion working ğŸ˜‰
      HINT 4: This challenge is difficult on purpose, so start watching the solution in case you're stuck. Then pause and continue!

      Afterwards, test with your own test data!

      GOOD LUCK ğŸ˜€
      */
      // underscore_case?
      console.log(
        'Mine Challenge ================================================'
      );
      document.body.append(document.createElement('textarea'));
      document.body.append(document.createElement('button'));

      // é»æ“Šæ™‚ï¼ŒæŠ“åˆ° textarea è¼¸å…¥çš„å€¼
      // const myBtn = document.querySelector('button');
      // myBtn.addEventListener('click', function () {
      //   const myTextArea = document
      //     .querySelector('textarea')
      //     .value.toLowerCase();
      //   // å†ç”¨ _ åˆ†å‰²å­—ä¸²æˆé™£åˆ—
      //   const textArr = myTextArea.split('_');
      //   // éæ¿¾æ‰ç´¢å¼•å¤§æ–¼ç­‰æ–¼ 1 çš„å…ƒç´ 
      //   const textArrFilter = textArr.filter(function (value, index) {
      //     return index < 1;
      //   });

      //   // ç•¶é™£åˆ—çš„ç´¢å¼•å€¼å¤§æ–¼ 0æ™‚ï¼Œè©²å­—ä¸²çš„ç¬¬ä¸€å€‹å­—æ¯å°±æœƒæ˜¯å¤§å¯«
      //   textArr.forEach(function (text, i) {
      //     if (i > 0) {
      //       textArrFilter.push(text.replace(text[0], text[0].toUpperCase()));
      //     }
      //   });
      //   const result = textArrFilter.join('');
      //   console.log(result);
      // });

      console.log(
        'Teacher Challenge ================================================'
      );
      document.querySelector('button').addEventListener('click', function () {
        const text = document.querySelector('textarea').value;
        const rows = text.split('\n');
        for (const [i, row] of rows.entries()) {
          const [first, second] = row.toLowerCase().trim().split('_');
          const output = `${first}${second.replace(
            second[0],
            second[0].toUpperCase()
          )}`;

          // console.log(output.padEnd(20, ' '));
          // å¦‚æœæ˜¯è£œå……ç©ºæ ¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¯«è¦è£œè¶³çš„æ•¸é‡
          console.log(`${output.padEnd(20)}${'âœ… '.repeat(i + 1)}`);
        }
      });

      // More exercise
      // Data needed for a later exercise
      const flights =
        '_Delayed_Departure;fao93766109;txl2133758440;11:25+_Arrival;bru0943384722;fao93766109;11:45+_Delayed_Arrival;hel7439299980;fao93766109;12:05+_Departure;fao93766109;lis2323639855;12:30';

      const getCode = str => str.slice(0, 3).toUpperCase();

      for (const flight of flights.split('+')) {
        const [status, from, to, time] = flight.split(';');
        const output = `${
          status.startsWith('_Delayed') ? 'â›”ï¸' : ''
        }${status.replaceAll('_', ' ')} ${getCode(from)} to ${getCode(
          to
        )} (${time.replace(':', 'h')})`;

        console.log(output.padStart(50));
      }
    </script>
  </body>
</html>
